<!DOCTYPE html>
<html>
<body>

<button id="demo" onclick="myFunction()">pouet !</button>
<script>
    function myFunction() {
        
        const url = (window.location != window.parent.location)
                  ? document.referrer
                  : document.location.href;
        
        const id = url.substring(url.length - 32, url.length)
        
        const reqUrl = "https://aqueous-caverns-81645.herokuapp.com/append-block/" + id
            
        var myHeaders = new Headers({
                    "Content-Type": "application/json",
                    "Authorization": "secret_mt9XpnujzYB8JQZC9X4PyYw0wMpsAzDr8BTInyPszuD",
                    "Notion-version": "2021-08-16",
                    "Access-Control-Allow-Origin": "*"
                });

            var myInit = { 
                method: 'GET',
                headers: myHeaders,
                mode: 'no-cors',
                cache: 'default',
                crossDomain: true
            };

            var myRequest = new Request(reqUrl, myInit);

            fetch(myRequest,myInit)
                .then(function(response) {
                    console.log(response.status, url);
            });

           // document.getElementById("demo").innerHTML = "Hello World";
    }
</script> 
</body>

</html>


